---
import Layout from '../layouts/Layout.astro';
import chatbotImage from '../img/chatbot.png';
---

<Layout title="Bot">
  <section class="bot-container mt-32">
    <img src={chatbotImage.src} alt="Bot" class="bot-image" />

    <div class="bot-chat mt-8">
      <div id="bot-response" class="bot-response">ðŸ‘‹ Hola, soy Roy. Â¿CÃ³mo puedo ayudarte hoy?</div>

      <div class="bot-options">
        <button class="option-btn">Â¿QuÃ© es esta aplicaciÃ³n?</button>
        <button class="option-btn">Â¿Para quÃ© sirve?</button>
        <button class="option-btn">Â¿QuiÃ©n creÃ³ FoodEmotions?</button>
        <button class="option-btn">Â¿CÃ³mo puedo usar el chatbot?</button>
        <button class="option-btn">Â¿cÃ³mo puedo acceder a todos los recursos de la aplicaciÃ³n?</button>
        <button class="option-btn">Â¿es gratis usar foodemotions?</button>
      </div>

      <input type="text" id="user-input" placeholder="O escribe tu pregunta..." class="bot-input" />
      <button id="send-btn" class="bot-button">Enviar</button>
    </div>
  </section>

  <script>
    const botResponse = document.getElementById('bot-response');
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');
    const optionButtons = document.querySelectorAll('.option-btn');

    // ðŸ§  Respuestas predefinidas
    const responses = {
      "Â¿quÃ© es esta aplicaciÃ³n?": "FoodEmotions es una plataforma que conecta emociones y comida ðŸ½ï¸. Te permite descubrir recetas segÃºn tu estado de Ã¡nimo y compartir experiencias con otros usuarios.",
      "Â¿para quÃ© sirve?": "Sirve para recomendarte recetas, canciones o lecturas segÃºn cÃ³mo te sientas ðŸ’­. AdemÃ¡s, puedes interactuar con el bot Roy para recibir orientaciÃ³n emocional.",
      "Â¿quiÃ©n creÃ³ foodemotions?": "Esta aplicaciÃ³n fue creada por el equipo de desarrollo de FoodEmotions, conformado por Cristian Echeverry GonzÃ¡lez y Angie Paola Yarce GÃ³mez como parte de un proyecto de inteligencia emocional aplicada a la promociÃ³n de la vida saludable.",
      "Â¿cÃ³mo puedo usar el chatbot?": "Solo selecciona una de las opciones o escribe una pregunta y presiona Enviar ðŸ’¬. Roy analizarÃ¡ tu mensaje y te responderÃ¡ con empatÃ­a.",
      "Â¿cÃ³mo puedo acceder a todos los recursos de la aplicaciÃ³n?": "Puedes acceder a todas las funcionalidades de FoodEmotions registrÃ¡ndote e iniciando sesiÃ³n en tu cuenta. Desde allÃ­, podrÃ¡s explorar recetas, mÃºsica y mÃ¡s.",
      "Â¿es gratis usar foodemotions?": "SÃ­, FoodEmotions es completamente gratis para todos los usuarios. Disfruta de todas sus funcionalidades sin costo alguno.",
    };

    // âœ¨ Efecto de escritura simulada
    function typeText(text) {
      botResponse.textContent = "";
      let index = 0;
      const interval = setInterval(() => {
        botResponse.textContent += text[index];
        index++;
        if (index === text.length) clearInterval(interval);
      }, 30);
    }

    // ðŸ—£ï¸ Mostrar respuesta
    function showResponse(question) {
      const lower = question.toLowerCase().trim();
      const answer = responses[lower] || "ðŸ¤” Lo siento, no tengo una respuesta para eso... pero pronto aprenderÃ© mÃ¡s cosas.";
      typeText(answer);
    }

    // ðŸ“© Enviar desde input
    sendBtn.addEventListener('click', () => {
      const text = userInput.value.trim();
      if (!text) return;
      showResponse(text);
      userInput.value = "";
    });

    // âŒ¨ï¸ Enter tambiÃ©n envÃ­a
    userInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        sendBtn.click();
      }
    });

    // ðŸ”˜ Seleccionar una opciÃ³n
    optionButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const question = btn.textContent;
        typeText("âœï¸ Roy estÃ¡ escribiendo...");
        setTimeout(() => showResponse(question), 800);
      });
    });
  </script>

  <style>
    .bot-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 100px;
      padding: 20px;
      border-radius: 10px;
    }

    .bot-image {
      width: 150px;
      height: auto;
      margin-bottom: 20px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    .bot-chat {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 90%;
      max-width: 400px;
      background: linear-gradient(145deg, #425638, #687450);
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      padding: 20px;
      color: #fff;
    }

    .bot-response {
      background-color: rgba(255, 255, 255, 0.15);
      padding: 12px 15px;
      border-radius: 10px;
      margin-bottom: 15px;
      width: 100%;
      text-align: center;
      min-height: 60px;
      font-size: 0.95rem;
      line-height: 1.5;
      box-shadow: inset 0 0 6px rgba(255, 255, 255, 0.1);
    }

    .bot-options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      width: 100%;
      margin-bottom: 15px;
    }

    .option-btn {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
      padding: 8px 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .option-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.02);
    }

    .bot-input {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: none;
      outline: none;
      margin-bottom: 10px;
      background-color: rgba(255, 255, 255, 0.1);
      color: #fff;
      font-size: 0.9rem;
      text-align: center;
    }

    .bot-input::placeholder {
      color: #ddd;
    }

    .bot-button {
      padding: 10px 20px;
      background: linear-gradient(90deg, #687450, #425638);
      color: #ffffff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.3s ease;
      font-weight: 600;
    }

    .bot-button:hover {
      transform: scale(1.05);
      background: linear-gradient(90deg, #425638, #687450);
    }
  </style>
</Layout>

